import React from 'react';
import Head from 'next/head'
import { FaChevronRight, FaAngleRight, FaTag } from 'react-icons/fa';

import Carrousel from '../components/Carrousel';
import Menu from '../components/Menu';
import Link from '../components/Link';
import Card from '../components/Card';
import HeaderNotification from '../components/HeaderNotification';

import styles from '../styles/Home.module.scss';
import Testimony from '../components/Testimony';
import { useState, useEffect } from 'react';


export default function Home() {

  const [menu, setMenu] = useState([]);

  useEffect(() => {

    fetch("https://graphql.datocms.com/", {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Accept': 'application/json',
        'Authorization': '0ee5f218c9a8a1ee1ec74f445ca6b3',
      },
      body: JSON.stringify({
        'query': `query {
          allMenus {
            id
            title
            description
            imagemurl {
              url
            }
            pricenew
            priceold
          }
        }`})
    }).then(async (res) => {
      const dados = await res.json();
      const allMenus = dados.data.allMenus;
      setMenu(allMenus);
    });

  }, [])

  return (
    <>
      <Head>
        <title>Pizzaria Inácio - Faça já o seu pedido</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <HeaderNotification />
      <Menu />

      <main id={styles.main} className="gap">

        <section className={styles.introduction}>
          <div className="container">
            <div className={styles.bannerIntroduction}>
              <h3 className={styles.titleBanner}>Super oferta!!!</h3>
              <p className={styles.bannerIntroductionText}>
                Lorem ipsum dolor sit amet consectetur adipisicing elit.
              </p>

              <div className={styles.bannerIntroductionFooter}>
                <Link to="/" className="btn">About more</Link>
                <Link to="/" className="btn btn-outline">Add cart</Link>
              </div>
            </div>
          </div>
        </section>

        <section className={styles.promotion} >
          <div className="container">
            <span className={styles.promotionIcon}>
              <FaTag />
            </span>
            <p>
              <span>Obá, desconto!</span>
              <Link to="/">
                Entre em contato agora
                <FaAngleRight />
              </Link>
            </p>
          </div>
        </section>
        <section className={'section ' + styles.portfolio}>
          <div className="container">
            <h2 className="title">Telecombo semanal!!!</h2>
            <div className={styles.cards}>
              {menu.map((item, index) => {
                return (
                  index < 6 && (
                    <Card data={item} key={item.id} />
                  )
                )
              })}
            </div>

            <footer>
              <div className={styles.callAction}>
                <p>Não ficou satisfeito com tele combo? temos outras opções!!!</p>
                <a href="" className="btn btn-yellow cta">
                  Ver cardápio completo
                  <FaChevronRight />
                </a>
              </div>
            </footer>
          </div>
        </section>

        <section className={'section ' + styles.testimonials}>
          <div className="container">
            <h2 className="title">Testimonials</h2>
            <div className={styles.testimonia}>

            </div>
          </div>
        </section>

        <section className={'section ' + styles.banner}>
          <div className="container">
            <h3 className="banner">Tele premium <br /> oferta!!!<br /></h3>
            <div className="value">
              <span className="real">
                R$
              </span>
              <span className="price">
                59,90
              </span>
            </div>

          </div>

        </section>

      </main>
    </>
  )
}
